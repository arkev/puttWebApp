extends ../layout

block content
  .disc-form
    .header.form-header
      a.close(href="/discs" aria-label="Cerrar")
        i.fa-solid.fa-xmark
      h1= disc ? 'Editar Disco' : 'Agregar Disco Nuevo'
    form#discForm(action=disc ? `/discs/${disc.id}/edit` : '/discs/new' method='post' enctype='multipart/form-data')
      .group
        label(for='alias') Alias
        input#alias(type='text' name='alias' required value=disc?disc.alias:'')
      .group
        label(for='model') Modelo
        input#model(type='text' name='model' required value=disc?disc.model:'')
      .group
        label(for='color') Color de disco
        input#color(type='color' name='color' value=disc?disc.color:'#000000')
      .group
        label(for='image') Imagen
        input#image(type='file' name='image' accept='image/*')
      .group
        label(for="brand") Fabricante
        if manufacturers && manufacturers.length
          select#brand(name="brand" required)
            option(value="") Selecciona fabricante
            each m in manufacturers
              option(value=m.name selected=(disc && disc.brand===m.name)?true:false)= m.name
        else
          // fallback si no hay catálogo
          input#brand(type="text" name="brand" placeholder="Fabricante" required value=disc?disc.brand:'')
      .group
        label(for='plastic') Plástico
        input#plastic(type='text' name='plastic' value=disc?disc.plastic:'')
      .group
        label(for='weight') Peso (g)
        input#weight(type='number' name='weight' value=disc?disc.weight:'')
      .group
        label Números de vuelo
        .flight-inputs
          input(type='number' name='speed' placeholder='Velocidad' value=disc && disc.flight ? disc.flight.speed : '')
          input(type='number' name='glide' placeholder='Planeo' value=disc && disc.flight ? disc.flight.glide : '')
          input(type='number' name='turn' placeholder='Vuelta' value=disc && disc.flight ? disc.flight.turn : '')
          input(type='number' name='fade' placeholder='Caída' value=disc && disc.flight ? disc.flight.fade : '')
      .group
        button.btn(type='submit') Guardar
    .bottom-nav
      a.nav-item(class=activeTab==='home' ? 'active' : '', href="/")
        i.fa-solid.fa-house
        span Inicio
      a.nav-item(class=activeTab==='discs' ? 'active' : '', href="/discs")
        i.fa-solid.fa-compact-disc
        span Discos
      a.play(href="/session" aria-label="Iniciar sesión")
        i.fa-solid.fa-bullseye
      a.nav-item(class=activeTab==='routines' ? 'active' : '', href="/routines")
        i.fa-solid.fa-list-check
        span Rutinas
      a.nav-item(class=activeTab==='you' ? 'active' : '', href="/you")
        i.fa-solid.fa-user
        span Tú
